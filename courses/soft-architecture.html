<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Theoretical Principles of Software Architecture</title>

		<link rel="stylesheet" href="../css/slides-reset.css">
		<link rel="stylesheet" href="../css/slides.css">
		<link rel="stylesheet" href="../css/slides-theme.css" id="theme">
		<link rel="stylesheet" href="../css/slides-code.css" id="highlight-theme">

		<style>
			.reveal .slides section section {
				margin-top: 1.5em; /* margin for upper section title */
			}

			.reveal .slides .note {
				padding: 0.5em;
				font-size: 0.5em;
				color: peru;
				background-color: wheat;
			}

			.reveal .slides .note .highlight {
				color: brown;
			}

			.reveal .slides .aside {
				color: gray;
				font-size: 0.8em;
			}
			
			.reveal .slides table {
				font-size: 0.5em;
			}

			.reveal .slides figcaption {
				color: gray;
				font-size: 0.5em;
			}

			.reveal .slides figure img {
				max-height: 8em; /*Â FIXME should be a percent of total height */
			}

			.reveal .slides mark {
				background-color: moccasin;
			}

			.reveal .slides .def {
				padding: 1em;
				background-color: whitesmoke;
				border: 1px black solid;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>Theoretical Principles of Software Architecture</h1>
					<p><a href="https://www.vcharpenay.link/">Victor Charpenay</a></p>
				</section>
				<section>
					<h4>Outline</h4>
					<section>
						<ol>
							<li>Introduction</li>
							<li>The Language of Architects</li>
							<li>Styles and Patterns</li>
							<li>The Example of Microservices</li>
							<li>The Example of REST</li>
							<li>Formal Architectural Analysis</li>
						</ol>
					</section>
				</section>
				<section>
					<h4>Introduction</h4>
					<section>
						<p>
							A public work analogy:
						</p>
						<p class="fragment">
							building a <mark>bridge</mark>
						</p>
					</section>
					<section>
						<p>
							What is the <mark>commonality</mark> between the following <mark>three bridges</mark>?
						</p>
					</section>
					<section>
						<figure>
							<img style="height: 5em;" src="../misc/soft-architecture/pont-cance.jpg">
							<img style="height: 5em;" src="../misc/soft-architecture/passerelle-seguin.jpg">
							<img style="height: 5em;" src="../misc/soft-architecture/akashi-bridge.jpg">
							<figcaption>
								A bridge in the <a href="https://fr.wikipedia.org/wiki/Cance_(rivi%C3%A8re)">Cance</a> valley;
								<a href="https://fr.wikipedia.org/wiki/Passerelle_Marc-Seguin"><span style="font-style: italic;">Passerelle Marc-Seguin</span></a>;
								<a href="https://en.wikipedia.org/wiki/Akashi_Kaikyo_Bridge">Akashi Kaikyo Bridge</a>
							</figcaption>
						</figure>
					</section>
					<section>
						<div>
							<img style="height: 3em;" src="../misc/soft-architecture/pont-cance.jpg">
							<img style="height: 3em;" src="../misc/soft-architecture/passerelle-seguin.jpg">
							<img style="height: 3em;" src="../misc/soft-architecture/akashi-bridge.jpg">
						</div>
						<p class="fragment">
							All three bridges are hung below <mark>suspension cables</mark>.
						</p>
					</section>
					<section>
						<p class="def">
							The <mark>architecture</mark> of [a building] is determined by 
							those aspects that are <mark>hardest to change</mark>.
						</p>
						<p class="aside">
							(source: attributed to Chris Verhoef)
						</p>
						<!-- p. 68 -->
					</section>
					<section>
						<p>
							The Akashi bridge was designed to resist earthquakes.
							Construction was completed after <mark>10 years</mark>.
						</p>
					</section>
					<section>
						<p>
							The Golden Gate bridge had to be <mark>retrofitted</mark> to resist seismic events.
							After <mark>20 years</mark>, the operation is still on-going.
						</p>
						<!-- https://www.goldengate.org/district/district-projects/seismic-retrofit/ (1997) -->
						<!-- https://sanfrancisco.cbslocal.com/2017/05/24/costly-golden-gate-bridge-retrofit-still-years-away-from-completion/ (2017) -->
					</section>
					<section>
						<p>
							Other example: the <mark>Millenium bridge</mark> had to be closed a few hours after it opened,
							for safety reasons.
						</p>
					</section>
					<section>
						<p>
							The bridge had a <mark>novel design</mark>, different from suspension cables.
						</p>
						<p class="fragment">
							Civil engineers had not anticipated that a resonance frequency of
							0.5Hz would make the bridge <mark>oscillate with increasing amplitude</mark>.
						</p>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/millenium-bridge.png">
							<figcaption>
								Millenium bridge
								<a href="https://www.youtube.com/watch?v=t-_VPRCtiUg">(source: Veritasium)</a>
							</figcaption>
						</figure>
					</section>
					<section>
						<p class="def">
							Architecture is also determined by those aspects that are likely to make a system fail.
						</p>
						<p class="aside">
							(source: self)
						</p>
					</section>
					<section>
						<p class="note">
							Definitions come from the same book, unless specified:
							<a href="https://www.softwarearchitecturebook.com/">Software Architecture</a>
							by Taylor, Medvidovic and Dashofy (2010).
						</p>
					</section>
					<section>
						<p class="def">
							A software system's <em>architecture</em> is the set of principal design decisions made about the system.
						</p>
						<!-- p. 58 -->
					</section>
					<!-- <section>
						<p>
							Design decisions?

							Structure (composed of business modules, technical modules),
							functional behavior (functions in a pre-defined order),
							interaction (all using the same protocol),
							nonfunctional properties (RSE?),
							implementation (technological choice, e.g. Java just because...)
						</p>
					</section> -->
					<!-- p. 58 -->
					<section>
						<p>
							A software architecture is either <mark>prescriptive</mark> (or as-designed) or
							<mark>descriptive</mark> (as-implemented).
						</p>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/datev-example.png">
							<figcaption>Example of technical debt in the DATEV information system</figcaption>
						</figure>
					</section>
				</section>
				<section>
					<h4>The Language of Architects</h4>
					<section>
						<p>
							An architectural model is defined over different <mark>perspectives</mark>:
						</p>
						<ul>
							<li class="fragment">
								structure<br>
								<span class="aside">components and interaction dependencies</span>
							</li>
							<li class="fragment">
								functionality<br>
								<span class="aside">sequences of interactions</span>
							</li>
							<li class="fragment">
								deployment<br>
								<span class="aside">mapping from components to hardware</span>
							</li>
						</ul>
					</section>
					<!-- p. 65: discussion on perspectives (structural, functional, deployment)? -->
					<section>
						<p>
							Each of these perspectives corresponds to a type of diagrams in the <mark>Unified Modeling Language</mark> (UML):
						</p>
						<ul>
							<li class="fragment">Component diagrams</li>
							<li class="fragment">Sequence diagrams</li>
							<li class="fragment">Deployment diagrams</li>
						</ul>
					</section>
					<section>
						<figure>
							<img alt="Example of component diagram for online shopping" src="https://www.uml-diagrams.org/examples/component-example-retail-website.png">
							<figcaption>
								Example of component diagram for online shopping
							</figcaption>
						</figure>
						<p class="note fragment">
							In this lecture, we will not consider hiearchical components.
						</p>
					</section>
					<section>
						<figure>
							<img alt="Example of sequence diagram for authentication" src="https://www.uml-diagrams.org/examples/sequence-example-facebook-authentication.png">
							<figcaption>
								Example of sequence diagram for authentication
							</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img alt="Example of deployment diagram for online booking" src="https://www.uml-diagrams.org/examples/deployment-example-manifest-web-application.png">
							<figcaption>
								Example of deployment diagram for online booking
							</figcaption>
						</figure>
					</section>
					<section>
						<p>
							See <a href="https://www.uml-diagrams.org/">uml-diagrams.org</a> for an extensive documentation.	
						</p>
					</section>
					<section>
						<p>
							An architectural model may be fully specified as a <mark>set of UML diagrams</mark> that share certain model entities: <mark>software components</mark>.
						</p>
					</section>
					<section>
						<div class="def" style="font-size: 0.8em;">
							<p>
								A <em>software component</em> is an architectural entity that
							</p>
							<ol>
								<li><mark>encapsulates</mark> a subset of the system's <mark>functionality</mark> and/or <mark>data</mark>,</li>
								<li>restricts access to that subset via an explicitly defined <mark>interface</mark>, and</li>
								<li>has explicitly defined <mark>dependencies</mark> on its required execution context.</li>
							</ol>
						</div>
						<!-- p. 69 -->
					</section>
					<!-- <section>
						<p>
							Best practices: encapsulation.
						</p>
						<p>
							Difference with SOLID: one component => one (configured) instance
							(vs. one class => multiple instances)
						</p>
					</section> -->
					<section>
						<p>
							Examples of components:
						</p>
						<ul>
							<li class="fragment">a Database Management System (DBMS)</li>
							<li class="fragment">a single Micro-Service</li>
							<li class="fragment">a publish-subscribe broker<a href="#/3/16/0"><span class="aside"><sup>*</sup></span></a></li>
						</ul>
					</section>
					<section>
						<p>
							Components often interact in similar ways (e.g. via procedure call).
						</p>
						<p class="fragment">
							The complexity of architectural models can be reduced by introducing <mark>software connectors</mark>.
						</p>
					</section>
					<section>
						<p class="def">
							A <em>software connector</em> is an architectural element tasked with
							effecting and <mark>regulating interactions</mark> among components.
						</p>
						<!-- p. 70 -->
					</section>
					<section>
						<p class="def">
							<em>Architectural connectors</em> are a collection of <mark>protocols</mark> that
							characterize each of the <mark>participant roles</mark> in an interaction and how
							these roles interact.
						</p>
						<p class="aside">
							Source: <a href="https://doi.org/10.1145/258077.258078">(Allen, 1997)</a>
						</p>
					</section>
					<section>
						<p>
							Examples of connectors:
						</p>
						<ul>
							<li class="fragment">
								procedure calls<br>
								<span class="aside">RPC, JMI</span>
							</li>
							<li class="fragment">
								event-based exchange<br>
								<span class="aside">WebSocket, Kafka</span>
							</li>
							<li class="fragment">
								data access<br>
								<span class="aside">ODBC, IPFS, BitTorrent</span>
							</li>
							<li class="fragment">
								streaming<br>
								<span class="aside">WebRTC</span>
							</li>
						</ul>
						<!-- <p>
							Procedure call
							Event
							Data access
							(Linkage)
							Stream
							Arbitrator (e.g. semaphores, round-robin -- concurrency management, scheduling and load balancing)
							Adaptor (conversion services)
							Distributor (never exist by themselves -- RPC includes a "distributor")
						</p> -->
						<!-- p. 164: connector types -->
					</section>
					<section>
						<p>
							Connectors are functionality-independent and <mark>reusable</mark>.
						</p>
						<p class="fragment">
							Components aren't.
						</p>
					</section>
					<section>
						<p>
							Components are fully<a href="#/3/17"><span class="aside"><sup>*</sup></span></a> specified by:
						</p>
						<ul>
							<li class="fragment">
								their <mark>interface</mark><br>
								<span class="aside">as in UML component diagrams</span>
							</li>
							<li class="fragment">
								their physical <mark>manifestation</mark><br>
								<span class="aside">as in UML deployment diagrams</span>
							</li>
						</ul>
					</section>
					<!-- note on difference between software components and hardware components -->
					<!-- illustration with Restbucks: NegaOctet, RÃ©fÃ©rentiel services numÃ©riques_v1.0_FR.pdf, p. 9 -->
					<section>
						<p>
							Connectors are fully specified by:
						</p>
						<ul>
							<li class="fragment">
								their <mark>protocol</mark><br>
								<span class="aside">as in sequence diagrams</span>
							</li>
						</ul>
					</section>
					<!-- comments on UML for architecting: p. 640 -->
					<section>
						<figure>
							<img src="../misc/soft-architecture/connector-implicit.png"><br>
							<img src="../misc/soft-architecture/connector-explicit.png"><br>
							<img src="../misc/soft-architecture/connector-component.png">
							<figcaption>Implicit, explicit and component-based connector definition in UML</figcaption>
						</figure>
						<p class="fragment note">
							The scope of a connector depends on the granularity of the architectural model.
						</p>
					</section>
					<section data-background-color="moccasin">
						<p>
							Why does this architectural model exclude the internal behavior of components (e.g. as state machines)?
						</p>
					</section>
					<section>
						<p>
							&hellip; because the internal behavior of a component is the aspect of a system that is <mark>easiest to change</mark>.
						</p>
					</section>
				</section>
				<!--
					see arch-*.png as real-world examples of architectures,
					as seen by future engineers (internship reports).
					Notes:
					- no formalism
					- various concerns
				-->
				<section>
					<h4>Styles and Patterns</h4>
					<section>
						<div class="def" style="font-size: 0.8em;">
							<p>
								An <em>architectural style</em> is a named collection of architectural design decisions that
							</p>
							<ol>
								<li>are applicable in a given <mark>development context</mark>,</li>
								<li><mark>constrain</mark> architectural design, and</li>
								<li>elicit <mark>beneficial qualities</mark> in each resulting system.</li>
							</ol>
						</div>
						<!-- p. ? -->
					</section>
					<section>
						<p>
							In short, an architectural style is a set of <mark>constraints on components and connectors</mark>.
						</p>
					</section>
					<section>
						<p>
							Common architectural styles:
						</p>
						<ul>
							<li class="fragment">client-server</li>
							<li class="fragment">microkernel</li>
							<li class="fragment">pipe-and-filter</li>
							<li class="fragment">blackboard</li>
							<li class="fragment">publish-subscribe</li>
							<li class="fragment">peer-to-peer</li>
						</ul>
						<!-- p. 101 -->
						<!-- <p>
							Layered: client-server
							(Modular: kernel-based) -- not in Taylor et al. (but described in Richards' "Soft Arch Patterns")
							Dataflow: pipe-and-filter
							Shared memory: blackboard
							Implicit invocation: pub-sub
							P2P?
							Others: CORBA (distributed object), REST (distributed resources)
						</p> -->
						<!-- p. 137 -->
						<!-- hierarchical: cathedral, kernel: bazaar model -->
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/arch-cs.png">
							<figcaption>Client-server style</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview/fetching_a_page.png" alt="Example of">
							<figcaption>Example of Web client fetching content from several servers</figcaption>
						</figure>
						<p class="note fragment">
							In fact, the architecture of the Web follows the more elaborate REST style.
						</p>
					</section>
					<!-- <section>
						<figure>
							<img src="https://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/022/2204/2204f1.inline.jpg" alt="Example of">
							<figcaption>Example of an RPC data flow</figcaption>
						</figure>
					</section> -->
					<section>
						<figure>
							<img src="../misc/soft-architecture/arch-kernel.png">
							<figcaption>Microkernel style</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/linux-sci.png">
							<figcaption>Steps in the execution of a Linux system call. Source: <a href="https://nostarch.com/tlpi/">(Kerrisk, 2010)</a></figcaption>
						</figure>
						<p class="note fragment">
							The Linux kernel provides more than 500 system calls for I/O, memory allocation, process execution, etc. (according to <a href="https://man7.org/linux/man-pages/man2/syscalls.2.html">man-pages</a>).
						</p>
					</section>
					<section>
						<figure>
							<img src="https://help.eclipse.org/latest/topic/org.eclipse.platform.doc.isv/guide/images/sdk-arch.svg" alt="Architecture of the Eclipse IDE with plug-ins">
							<figcaption>Architecture of the Eclipse IDE with plug-ins</figcaption>
							<!-- source: https://help.eclipse.org/latest/index.jsp -->
						</figure>
						<p class="note fragment">
							The Eclipse IDE has more than 50k plug-ins available (according to the <a href="https://marketplace.eclipse.org/">Eclipse Marketplace</a>).
						</p>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/arch-pipe-filter.png">
							<figcaption>Pipe-and-filter style</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://github.com/tensorflow/docs/blob/master/site/en/guide/images/intro_to_graphs/two-layer-network.png?raw=1">
							<!-- https://www.tensorflow.org/guide/intro_to_graphs?hl=en -->
							<figcaption>TensorFlow graph of a a two-layer neural network</figcaption>
						</figure>
						<p class="note fragment">
							The pipe-and-filter style is common in (big) data processing software. See e.g. the <a href="https://spark.apache.org/streaming/">Apache Spark Streaming API</a>.
						</p>
					</section>
					<section>
						<figure>
							<img src="https://flink.apache.org/img/usecases-eventdrivenapps.png">
							<!-- https://flink.apache.org/usecases.html -->
							<figcaption>Stream processing with Apache Flink</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/arch-blackboard.png">
							<figcaption>Blackboard style</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/WMF_Structured_Content_Store.png">
							<!-- https://www.mediawiki.org/wiki/Architecture_Repository/Strategy/Goals_and_initiatives/Structured_content_proof_of_value -->
							<figcaption>Proof-of-Concept architecture for a MediaWiki extension</figcaption>
							<!-- see also Mediawiki API gateway
							https://wikitech.wikimedia.org/wiki/API_Gateway -->
						</figure>
						<p class="note fragment">
							The blackboard architecture is most commonly used for knowledge management.
						</p>
					</section>
					<!-- <section>
						<p>
							ODBC with concurrent access?
						</p>
						<p>
							<i>Not</i> social media (stream is coordinated)
						</p>
					</section> -->
					<section>
						<figure>
							<img src="../misc/soft-architecture/arch-pub-sub.png">
							<figcaption>Publish-subscribe style</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://www.hivemq.com/img/svg/mqtt-publish-subscribe.svg" alt="HiveMQ broker in automotive example">
							<!-- https://www.hivemq.com/blog/mqtt-essentials-part2-publish-subscribe/ -->
							<figcaption>Publish-subscribe broker (MQTT protocol) in an Internet of Things (IoT) application</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://www.cloudkarafka.com/img/blog/consumer-group-kafka.png" alt="Topic partitioning with Kafka">
							<!-- https://www.cloudkarafka.com/blog/part1-kafka-for-beginners-what-is-apache-kafka.html -->
							<figcaption>Apache Kafka broker using a derivative of publish-subscribe with persistence</figcaption>
						</figure>
						<p class="note fragment">
							Kafka subscribers do not get notified. They have to periodically poll data from the broker. The popular <a href="https://www.rabbitmq.com/">RabbitMQ</a> follows the same style. 
						</p>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/arch-p2p.png">
							<figcaption>Peer-to-peer style</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/3/3d/Torrentcomp_small.gif">
							<figcaption>File sharing with the BitTorrent protocol</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://ethereum.org/static/7a59bdb7a666b01a74535e8bea21a532/c1b63/eth1eth2client.png">
							<!-- https://ethereum.org/en/developers/docs/nodes-and-clients/ -->
							<figcaption>Ethereum client for peer-to-peer transaction management</figcaption>
						</figure>
						<p class="note fragment">
							In a peer-to-peer network, an architectural change such as <a href="https://ethereum.org/en/upgrades/merge/">The Merge</a> requires updating the software of all participating peers.
						</p>
					</section>
					<!-- TODO add section on benefits of these styles -->
					<section>
						<p>
							Advanced (but also common) architectural styles:
						</p>
						<ul>
							<li class="fragment">
								SOA<br>
								<span class="aside">Service-Oriented Architecture</span>
							</li>
							<li class="fragment">
								CORBA<br>
								<span class="aside">Common Object Request Broker Architecture</span>
							</li>
							<li class="fragment">
								REST<br>
								<span class="aside">Representational State Transfer</span>
							</li>
						</ul>
						<!-- p. 133 (CORBA) -->
					</section>
					<section>
						<p class="def" style="font-size: 0.8em;">
							An <em>architectural pattern</em> is a named collection of architectural design decisions that
							are applicable to a <mark>recurring design problem</mark>, <mark>parameterized</mark>
							to account for different software development contexts in which that problem appears.
						</p>
						<!-- p. ? (and 94) -->
					</section>
					<section>
						<p>
							Common architectural patterns:
						</p>
						<ul>
							<li class="fragment">3-tier</li>
							<li class="fragment">Model-View-Controller (MVC)</li>
							<li class="fragment">sense-compute-control</li>
						</ul>
						<!-- p. 94 (starting from) -->
						<!-- <p>
							Difference between C/S style and 3-tier (2-tier) pattern?
							Functional limitation of the pattern. Freedom of use for the style.
							Presentation may be client/it may be server.
						</p> -->
					</section>
					<section data-background-color="moccasin">
						<p>
							What differences are there between a style and a pattern?
						</p>
					</section>
					<section>
						<p>
							A pattern is self-contained. It can be considered as a <mark>single</mark> (parametric) <mark>architectural model</mark>.
						</p>
						<p class="fragment">
							From a style, <mark>infinitely many</mark> architectural models can be derived.
						</p>
					</section>
					<section>
						<p>
							A pattern constrains <mark>what component</mark> to use <mark>for what purpose</mark>.
						</p>
						<p class="fragment">
							A style mostly constrains the <mark>behavior of connectors</mark>.
						</p>
					</section>
					<!-- <section>
						<p>
							Patterns are applicable anywhere. Styles aren't.
						</p>
						<p class="fragment">
							Patterns are self-contained. Styles aren't.
						</p>
					</section> -->
					<!-- To change... Main difference: components and their purpose are pre-defined in arch patterns while style only constrain possible interactions. -->
					<!-- architectural style: set of constraints over all possible models. architectural pattern: (sub)model common to a subset of all possible models? -->
				</section>
				<section>
					<h4>The Example of Microservices</h4>
					<section>
						<p>
							<mark>Microservices</mark> is the most <mark>widely used</mark> architectural style in standard information systems.
						</p>
						<!-- TODO prove that -->
						<p class="note fragment">
							As such, the microservice style is most <span class="highlight">difficult to define</span>: the more architects adopt a style, the more diverging interpretations there is...
						</p>
					</section>
					<section>
						<p>
							Microservices can be viewed as the <mark>combined adoption</mark> of:
						</p>
						<ul>
							<li class="fragment">the <mark>SOA</mark> style</li>
							<li class="fragment">the <mark>2-tier</mark> pattern</li>
						</ul>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/arch-soa.png">
							<figcaption>SOA style</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/arch-3tier.png">
							<figcaption>2-tier pattern</figcaption>
						</figure>
					</section>
					<section>
						<p>
							A microservice architecture has:
						</p>
						<ul>
							<li class="fragment">2n <mark>decoupled</mark> tiers</li>
							<li class="fragment">one component for <mark>discovery</mark></li>
							<li class="fragment">one component for <mark>routing</mark></li>
							<li class="fragment">one component for <mark>caching</mark></li>
							<li class="fragment">(and other admin. components)</li>
						</ul>
						<p class="note fragment">
							See several examples as part of the <a href="https://www.csl.cornell.edu/~delimitrou/slides/2019.asplos.microservices.slides.pdf">DeathStarBench benchmark</a> for academic research.
						</p>
					</section>
					<!-- TODO component diagram -->
					<section>
						<p>
							The microservice architectural style often <mark>dictates human organization</mark> around software development.
						</p>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/microservices-teams.png">
							<figcaption>Organization across software development activities. Source: <a href="https://www.slideshare.net/adriancockcroft/microservices-workshop-craft-conference">(Cockcroft, 2016)</a></figcaption>
						</figure>
					</section>
					<section data-auto-animate>
						<figure data-id="microservices-org" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/microservices-before.png">
							<figcaption>General org. to develop software. Source: <a href="https://www.slideshare.net/adriancockcroft/microservices-workshop-craft-conference">(Cockcroft, 2016)</a></figcaption>
						</figure>
					</section>
					<section data-auto-animate>
						<figure data-id="microservices-org" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/microservices-after.png">
							<figcaption>Alternative org. to develop microservices. Source: <a href="https://www.slideshare.net/adriancockcroft/microservices-workshop-craft-conference">(Cockcroft, 2016)</a></figcaption>
						</figure>
					</section>
					<!-- on microservices: typical examples to be found under https://dl.acm.org/doi/pdf/10.1145/3297858.3304013 pp. 5-6 -->
					<!-- see also slides by Adrian Cockcroft on Slideshare (refd by paper above) -->
					<!-- https://www.slideshare.net/adriancockcroft/microservices-workshop-craft-conference -->
				</section>
				<section>
					<h4>The Example of REST</h4>
					<section>
						<p>
							REST is an architectural style for (highly) <mark>distributed information systems</mark>.
						</p>
						<p class="fragment">
							It is mostly relevant in the presence of multiple actors</mark>,
							within large <mark>organizations</mark>, across organizations or even at a <mark>world-scale</mark>.
						</p>
						<p class="note fragment">
							REST has influenced most of what the Web is now, via HTTP/1.1.
						</p>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/restbucks-actors.png">
							<img src="../misc/soft-architecture/restbucks-interactions.png">
							<figcaption>Actors of the Restbucks system, "a little coffee shop with global ambitions," and example interactions</figcaption>
						</figure>
						<p class="note fragment">
							The Restbucks example is taken from
							<a href="http://oreilly.com/catalog/9781449394943/">REST in practice: hypermedia and system architecture</a>,
							by Webber, Parastatidis and Robinson (2010). 
						</p>
						<p class="note fragment">
							Authors have worked at Microsoft and Thoughtworks, hence the example.
						</p>
					</section>
					<section>
						<p>
							Restbucks wants:
						</p>
						<ul>
							<li class="fragment">to attract millions of customers (<mark>scalability</mark>),</li>
							<li class="fragment">not to accept orders if they can't be fulfilled (<mark>integrity</mark>) and</li>
							<li class="fragment">to make sure an order is always fulfilled once accepted (<mark>fault-tolerance</mark>).</li>
						</ul>
						<!-- p. 25 -->
					</section>
					<section>
						<table>
							<thead>
								<tr>
									<th>Basic style</th>
									<th>Scalability</th>
									<th>Integrity</th>
									<th>Fault-tolerance</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Microkernel</td>
									<td>-</td>
									<td>++</td>
									<td>-</td>
								</tr>
								<tr>
									<td>Pipe-and-filter</td>
									<td>++</td>
									<td>-</td>
									<td>+-</td>
								</tr>
								<tr>
									<td>Publish-subscribe</td>
									<td>++</td>
									<td>--</td>
									<td>--</td>
								</tr>
								<tr>
									<td>...</td>
								</tr>
							</tbody>
							<!-- Fieldings: fault-tolerance ~ reliability, integrity not considered -->
							<caption>Analysis of several architectural styles for Restbucks</caption>
						</table>
					</section>
					<section>
						<p>
							A more complex style to better fulfill all requirements is required.
						</p>
						<p class="fragment">
							Complex styles for distributed architectures (CORBA, REST) tend to rely on <mark>operations on remote objects</mark>.
						</p>
						<p class="note fragment">
							Chronologically, REST replaced CORBA (~in 2000).
						</p>
					</section>
					<section>
						<p>
							Objects manipulated by Restbucks are:
						</p>
						<ul>
							<li class="fragment">orders</li>
							<li class="fragment">payments</li>
							<li class="fragment">receipts</li>
						</ul>
					</section>
					<section>
						<p>
							In REST, an object becomes a <mark>Web resource</mark> identified with a URI:
						</p>
						<ul>
							<li class="fragment">https://restbucks.com/<span style="color: brown;">order</span>/1234</li>
							<li class="fragment">https://restbucks.com/<span style="color: brown;">payment</span>/1234</li>
							<li class="fragment">https://restbucks.com/<span style="color: brown;">receipt</span>/1234</li>
						</ul>
					</section>
					<section>
						<p>
							Only <mark>CRUD operations</mark> are available on the resource (create, replace, update, delete).
						</p>
						<p class="fragment">
							Object instantiation is performed as resource creation on a <mark>collection resource</mark>.
						</p>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/restbucks-protocol.png">
							<figcaption>HTTP requests for the Restbucks ordering service</figcaption>
						</figure>
					</section>
					<section>
						<p>
							The state of the application is <mark>driven by hypermedia</mark>.
						</p>
						<p class="note fragment">
							That is, references to other objects are available to service consumers as Web links.
						</p>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/restbucks-hypermedia.png">
							<figcaption>HTTP requests for the Restbucks ordering service</figcaption>
						</figure>
					</section>
					<section>
						<p>
							Such a "hypermedia" Restbuck service complies to the REST style.
						</p>
					</section>
					<section>
						<p>
							REST is an architectural style <mark>derived</mark> from simpler styles.
						</p>
						<figure>
							<img src="../misc/soft-architecture/rest-derivation.png">
							<figcaption>REST derivation by style constraints <a href="">(Fielding, 2000)</a></figcaption>
						</figure>
					</section>
					<section>
						<p>
							REST mainly builds upon <mark>6 styles or constraints</mark>:
						</p>
						<ul>
							<li class="fragment">Client-server</li>
							<li class="fragment">Stateless communication</li>
							<li class="fragment">Cache</li>
							<li class="fragment">Uniform interface</li>
							<li class="fragment">Layered system</li>
							<li class="fragment">Code-on-demand</li>
						</ul>
					</section>
					<section data-auto-animate>
						<p class="def" style="font-size: 0.6em;">
							A <mark>server</mark> component listens for requests.
							A <mark>client</mark> component sends a request to the server via a connector.
						</p>
						<figure data-id="rest-derivation" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/rest-derivation-1.png">
							<figcaption>REST derivation by style constraints (1)</figcaption>
						</figure>
					</section>
					<section data-auto-animate>
						<p class="def" style="font-size: 0.6em;">
							Communication must be <mark>stateless</mark>.
							Each request cannot take advantage of any stored context on the server.
						</p>
						<!-- Session state is therefore kept entirely on the client. -->
						<figure data-id="rest-derivation" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/rest-derivation-2.png">
							<figcaption>REST derivation by style constraints (2)</figcaption>
						</figure>
					</section>
					<section data-auto-animate>
						<p class="def" style="font-size: 0.6em;">
							The <mark>cache</mark> style requires that the data within a response to a request be labeled as cacheable.
						</p>
						<figure data-id="rest-derivation" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/rest-derivation-3.png">
							<figcaption>REST derivation by style constraints (3)</figcaption>
						</figure>
					</section>
					<section data-auto-animate>
						<p class="def" style="font-size: 0.6em;">
							Interacting components have a <mark>uniform interface</mark> between each other.
						</p>
						<figure data-id="rest-derivation" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/rest-derivation-4.png">
							<figcaption>REST derivation by style constraints (4)</figcaption>
						</figure>
					</section>
					<section data-auto-animate>
						<p class="def" style="font-size: 0.6em;">
							Each component cannot "see" <mark>beyond the immediate layer</mark> with which
							it is interacting.
						</p>
						<figure data-id="rest-derivation" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/rest-derivation-5.png">
							<figcaption>REST derivation by style constraints (5)</figcaption>
						</figure>
					</section>
					<section data-auto-animate>
						<p class="def" style="font-size: 0.6em;">
							Client functionality <em>may</em> be extended by <mark>downloading and executing code</mark> in the form of applets or scripts.
						</p>
						<figure data-id="rest-derivation" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/rest-derivation-6.png">
							<figcaption>REST derivation by style constraints (6)</figcaption>
						</figure>
					</section>
					<section>
						<p>
							<mark>All constraints are required</mark> for a RESTful architecture.
						</p>
						<figure>
							<img src="../misc/soft-architecture/rest-derivation-all.png">
							<figcaption>REST derivation by style constraints (all)</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/arch-rest.png">
							<figcaption>REST style</figcaption>
						</figure>
					</section>
					<section>
						<table>
							<thead>
								<tr>
									<th>Basic style</th>
									<th>Scalability</th>
									<th>Integrity</th>
									<th>Fault-tolerance</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Microkernel</td>
									<td>-</td>
									<td>++</td>
									<td>-</td>
								</tr>
								<tr>
									<td>Pipe-and-filter</td>
									<td>++</td>
									<td>-</td>
									<td>+-</td>
								</tr>
								<tr>
									<td>Publish-subscribe</td>
									<td>++</td>
									<td>--</td>
									<td>--</td>
								</tr>
								<tr style="background: moccasin;">
									<td>REST</td>
									<td>++</td>
									<td>++</td>
									<td>++</td>
								</tr>
							</tbody>
							<caption>Analysis of several architectural styles for the Restbucks system (bis)</caption>
						</table>
					</section>
					<!--  also: performance, simplicity, modifiability, visibility, portability -->
					<section>
						<p>
							The <mark>uniform interface</mark> constraint is specific to REST.
						</p>
						<p class="fragment">
							It is best explained in terms of a <mark>"maturity model"</mark>.
						</p>
						<p class="note fragment">
							See also
							<a href="https://www.martinfowler.com/articles/richardsonMaturityModel.html">Martin Fowler's explanation</a>
							on the topic.
						</p>
					</section>
					<!-- TODO move maturity model above (at the Restbucks example) -->
					<section data-auto-animate>
						<p>
							At level 0, no restriction applies to Web services.
						</p>
						<figure data-id="maturity-level" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/maturity-0.png">
							<figcaption>Maturity level 0</figcaption>
						</figure>
					</section>
					<section data-auto-animate>
						<p>
							At level 1, resources are uniquely identified by a <mark>URI</mark>.
						</p>
						<figure data-id="maturity-level" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/maturity-1.png">
							<figcaption>Maturity level 1</figcaption>
						</figure>
					</section>
					<section data-auto-animate>
						<p>
							At level 2, resources can be manipulated with <mark>HTTP operations</mark>.
						</p>
						<figure data-id="maturity-level" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/maturity-2.png">
							<figcaption>Maturity level 2</figcaption>
						</figure>
					</section>
					<section data-auto-animate>
						<p>
							At level 3, available operations are exposed via <mark>hypermedia controls</mark>.
						</p>
						<figure data-id="maturity-level" data-auto-animate-duration="0">
							<img src="../misc/soft-architecture/maturity-3.png">
							<figcaption>Maturity level 3</figcaption>
						</figure>
					</section>
					<section>
						<p>
							A Web API with maturity level 0, 1 or 2 is <em>not</em> RESTful.
						</p>
						<p class="fragment">
							<mark>Maturity level 3</mark> is necessary for Web APIs to be RESTful.
						</p>
						<p class="fragment">
							As a complex architectural style, it is (too) easy to <mark>misuse REST</mark>.
						</p>
					</section>
					<!-- Here, introduce microservices, as a style based on MM level 2, only (although nothing prevents adoption of level 3) -->
					<section>
						<p>
							Other examples of misuse of the REST architectural style include:
						</p>
						<ul>
							<li class="fragment">one-page Web applications, e.g. with <a href="https://graphql.org/">GraphQL</a> querying</li>
							<!-- https://goodapi.co/blog/rest-vs-graphql -->
							<li class="fragment">publish-subscribe on the Web, e.g. with <a href="https://www.w3.org/TR/websub/">WebSub</a></li>
						</ul>
						<p class="note fragment">
							Both examples do, however, follow other styles <span class="highlight">at a higher model granularity</span>. 
						</p>
						<!--
							GraphQL: layered style,
							WebSub: publish-subscribe
						-->
					</section>
				</section>
				<section>
					<h4>Formal Architectural Analysis</h4>
					<section>
						<p>
							In 1997, Allen and Garlan introduced a <mark>formal language</mark> to express architectural models.
							<a href="https://doi.org/10.1145/258077.258078">(Allen, 1997)</a>
						</p>
						<p class="fragment">
							This language is based on <mark>Communicating Sequential Processes</mark> (CSP).
						</p>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/csp.svg">
							<!-- source: Wikidata-->
							<figcaption>Syntactic constructs of CSP</figcaption>
						</figure>
					</section>
					<!-- <section>
						<p>
							The major differences between local and distributed computing concern the areas of
							<mark>latency</mark>, <mark>memory access</mark>, <mark>partial failure</mark>, and <mark>concurrency</mark>
							<a href="https://link.springer.com/chapter/10.1007%2F3-540-62852-5_6">(Waldo, 1996)</a>
						</p>
					</section> -->
					<section>
						<p>
							The main motivation for a formal architectural language is <mark>formal verification</mark> over complex systems.
						</p>
						<p class="note fragment">
							Complex systems are characterized by a high number of interacting components.
						</p>
					</section>
					<section>
						<figure>
							<img src="../misc/soft-architecture/facebook-integrity.jpg">
							<figcaption>Excerpt of an e-mail sent by a Facebook engineer <a href="https://www.lemonde.fr/pixels/article/2021/10/26/comment-l-algorithme-de-facebook-echappe-au-controle-de-ses-createurs_6099888_4408996.html">(Le Monde, 2021)</a></figcaption>
						</figure>
					</section>
					<section>
						<p>
							REST ensures a certain decoupling between components.
						</p>
						<p class="fragment">
							But concrete implementations are <mark>never bug-free</mark>.
						</p>
					</section>
					<section>
						<p>
							Formal verification has been extensively applied to <mark>hardware design</mark>.
						</p>
						<figure>
							<img src="../misc/soft-architecture/formal-validation.png">
							<figcaption>Different ways to apply formal verification in a design <a href="https://link.springer.com/book/10.1007/978-3-662-10778-2">(Schneider, 2004)</a></figcaption>
						</figure>
					</section>
					<section>
						<p>
							Formal verification may as well be used for <mark>architectural analysis</mark>. 
						</p>
						<p class="fragment">
							System properties to verify are typically:
						</p>
						<ul>
							<li class="fragment">
								<mark>safety</mark> properties<br>
								<span class="aside">to ensure some error <em>never</em> occurs</span>
							</li>
							<li class="fragment">
								<mark>liveness</mark> properties<br>
								<span class="aside">to ensure some action is <em>always</em> performed</span>
							</li>
						</ul>
					</section>
					<section>
						<p>
							Concrete validation languages include:
						</p>
						<ul>
							<li class="fragment">
								<a href="https://en.wikipedia.org/wiki/TLA%2B">TLA<sup>+</sup></a><br>
								<span class="aside">Temporal Logic of Actions (+)</span>
							</li>
							<li class="fragment">
								<a href="https://en.wikipedia.org/wiki/TLA%2B">Promela</a><br>
								<span class="aside">Process Modeling Language</span>
							</li>
						</ul>
					</section>
					<section>
						<p>
							As an example, Amazon Web Services (AWS) has been using TLA<sup>+</sup>.
						</p>
						<figure class="fragment">
							<img src="../misc/soft-architecture/formal-validation-aws.png">
							<figcaption>AWS algorithms verified with TLA<sup>+</sup> and PlusCal, a TLA<sup>+</sup> derivative <a href="https://dl.acm.org/doi/10.1145/2699417">(Newcombe, 2015)</a></figcaption>
						</figure>
					</section>
				</section>
			</div>
		</div>

		<script src="../js/slides.js"></script>
		<script src="../js/slides-code.js"></script>
		<script>
			Reveal.initialize({
				hash: true,
				plugins: [ RevealHighlight ]
			});
		</script>
	</body>
</html>
