<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>A Tale of Two RDF Schemas: SHACL vs. OWL</title>

		<link rel="stylesheet" href="../css/slides-reset.css">
		<link rel="stylesheet" href="../css/slides.css">
		<link rel="stylesheet" href="../css/slides-theme.css" id="theme">
		<link rel="stylesheet" href="../css/slides-code.css" id="highlight-theme">

		<style>
			.reveal .slides section section {
				margin-top: 1.5em; /* margin for upper section title */
			}

			.reveal .slides .aside {
				color: gray;
				font-size: 0.8em;
			}

			.reveal .slides .note {
				padding: 0.5em;
				font-size: 0.5em;
				color: peru;
				background-color: wheat;
			}

			.reveal .slides .note .highlight {
				color: brown;
			}
			
			.reveal .slides table {
				font-size: 0.5em;
			}

			.reveal .slides caption {
				color: gray;
			}
			
			.reveal .slides .sql {
				text-align: left;
			}
			
			.reveal .slides .sparql {
				text-align: left;
			}
			
			.reveal .slides .java {
				text-align: left;
			}
			
			.reveal .slides .ttl {
				text-align: left;
			}

			.reveal .slides .prefix {
				color: grey;
			}

            .reveal .slides .var {
                color: darkmagenta;
                font-weight: bold;
            }

            .reveal .slides .comment {
                color: darkseagreen;
            }

            .reveal .slides .param {
                color: lightgray;
            }

            .reveal .slides .string {
                color: peru;
            }

            .reveal .slides .nb {
                color: skyblue;
            }

			.reveal .slides .log {
				text-align: left;
				padding-left: 10px;
				background-color: black;
				color: cornsilk;
			}

			.reveal .slides .log.error {
				color: crimson;
			}

			.reveal .slides figcaption {
				color: gray;
				font-size: 0.5em;
			}

			.reveal .slides figure img {
				max-height: 8em; /*Â FIXME should be a percent of total height */
			}

			.reveal .slides mark {
				background-color: moccasin;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>
						A Tale of Two RDF Schemas:<br>
						<span style="text-shadow: lightblue 5px 5px;">SHACL</span>
						vs.
						<span style="text-shadow: lightgreen 5px 5px;">OWL</span>?
					</h1>
					<p><a href="https://www.vcharpenay.link/">Victor Charpenay</a></p>
				</section>
				<section>
					<h4>Outline</h4>
					<ol>
						<li class="fragment">A Schema for What?</li>
						<li class="fragment">A Schema for Validation</li>
						<li class="fragment">A Schema for Inference</li>
					</ol>
				</section>
				<section>
					<h4>A Schema for What?</h4>
					<section>
						<p>
							Relational databases always rely on a <mark>schema for guaranteeing consistency</mark>.
						</p>
					</section>
					<section>
						<p>
							A relational schema defines:
						</p>
						<ul>
							<li class="fragment">relation <mark>attributes</mark></li>
							<li class="fragment"><mark>functional dependencies</mark></li>
							<li class="fragment">integrity <mark>constraints</mark></li>
							<!-- ex: referential integrity -->
						</ul>
					</section>
					<section>
						<p class="sql">
						CREATE TABLE <span class="var">Person</span>(<br>
						&nbsp;&nbsp;<span class="var">taxID</span> VARCHAR(<span class="nb">25</span>) NOT NULL,<br>
						&nbsp;&nbsp;<span class="var">familyName</span> VARCHAR(<span class="nb">50</span>) NOT NULL,<br>
						&nbsp;&nbsp;<span class="var">givenName</span> VARCHAR(<span class="nb">50</span>) NOT NULL,<br>
						&nbsp;&nbsp;<span class="var">birthDate</span> DATE,<br>
						&nbsp;&nbsp;PRIMARY KEY (<span class="var">taxID</span>)<br>
						);
						</p>
					</section>
					<section>
						<p class="sql">
							INSERT INTO <span class="var">Person</span><br>
							VALUES<br>
							(NULL, <span class="string">'Ketchum'</span>, <span class="string">'Ash'</span>, NULL);
						</p>
						<p class="fragment log error">
							Error: taxID cannot be NULL.
						</p>
					</section>
					<section>
						<p>
							Object-oriented models also rely on a <mark>schema to verify </mark> the <mark>executability</mark> of programs at compile time.
						</p>
					</section>
					<section>
						<p>
							An object-oriented schema defines:
						</p>
						<ul>
							<li class="fragment">a <mark>class hierarchy</mark></li>
							<li class="fragment"><mark>frames</mark> (attributes, methods)</li>
						</ul>
					</section>
					<section>
						<p class="java">
							class <span class="var">Person</span> extends <span class="var">Thing</span> {<br>
							&nbsp;&nbsp;final String <span class="var">taxID</span>;<br>
							&nbsp;&nbsp;final String <span class="var">familyName</span>;<br>
							&nbsp;&nbsp;final String <span class="var">givenName</span>;<br>
							&nbsp;&nbsp;final Date <span class="var">birthDate</span>;<br><br>
							&nbsp;&nbsp;public <span class="var">Person</span>(String taxID) { &hellip; }<br>
							}
						</p>
						<p class="fragment log error">
							Error: familyName is never assigned.
						</p>
					</section>
					<section>
						<p>
							In contrast, <a href="https://schema.org/">schema.org</a> is an RDF schema that <mark>cannot generate errors</mark>.
						</p>
					</section>
					<section>
						<p>
							Yet, <a href="https://schema.org/">schema.org</a> also defines:
						</p>
						<ul>
							<li>a <mark>class hierarchy</mark></li>
							<li><mark>properties</mark> (~attributes)</li>
						</ul>
					</section>
					<section>
						<p class="ttl">
							@prefix <span class="prefix">rdfs:</span> &lt;http://www.w3.org/&hellip;&gt;<br>
							@prefix <span class="prefix">:</span> &lt;http://schema.org/&gt;<br><br>
							<span class="prefix">:</span><span class="var">Person</span> <span class="prefix">rdfs:</span>subClassOf <span class="prefix">:</span><span class="var">Thing</span> .<br>
							<span class="comment"># (skipping taxID, etc...)</span><br>
							<span class="prefix">:</span><span class="var">birthDate</span><br>
							&nbsp;&nbsp;<span class="prefix">:</span>domainIncludes <span class="prefix">:</span><span class="var">Person</span> ;<br>
							&nbsp;&nbsp;<span class="prefix">:</span>rangeIncludes <span class="prefix">:</span><span class="var">Date</span> .
						</p>
						<p class="note fragment">
							<a href="https://schema.org/">Schema.org</a> borrows concepts from <a href="https://www.w3.org/TR/rdf-schema/">RDF Schema</a> (RDFS), a W3C standard.
						</p>
					</section>
					<section>
						<p class="ttl">
							&lt;ash&gt;<br>
							&nbsp;&nbsp;<span class="comment"># taxID: none</span><br>
							&nbsp;&nbsp;:<span class="var">familyName</span> <span class="string">"Ketchum"</span> ;<br>
							&nbsp;&nbsp;:<span class="var">givenName</span> <span class="string">"Ash"</span> .
						</p>
						<p class="fragment log">
							OK.
						</p>
						<!-- note: the date string could be typed. But no possibility of doing this with RDFS. Must use OWL -->
					</section>
					<!-- <section>
						<p>
							Schema.org is derived from <a href="https://www.w3.org/TR/rdf-schema/">RDF Schema</a> (RDFS), a W3C standard.
						</p>
						<p class="fragment">
							"RDFS provides mechanisms for <mark>describing</mark> groups of related resources and the relationships between these resources." <span class="aside">(source: W3C)</span>
						</p>
					</section> -->
					<section>
						<p>
							To ensure large <mark>adoption</mark>, schema.org imposes no constraint on the structure of RDF triples that use its classes and properties.
						</p>
						<!-- <p class="fragment">
							RDFS does not impose constraints either. Instead, it focuses on schema <mark>extension</mark> (via sub-classes and sub-properties).
						</p> -->
						<p class="note fragment">
							Semantic Web practitioners favor the terms <span class="highlight">'vocabulary'</span> or <span class="highlight">'ontology'</span> over 'schema' to refer to such a model.
						</p>
					</section>
					<section>
						<p>
							For example, states <mark>identify citizens with tax IDs</mark> but not all persons are citizens of some state, especially not <mark>fictional characters</mark>.
						</p>
						<p class="fragment">
							Some real persons also have <mark>multiple tax IDs</mark>.
						</p>
					</section>
					<!-- <section>
						<p>
							Moreover, in large datasets, it is likely that the <mark>birth date</mark> of persons is known with <mark>varying levels of details</mark> (year, date, time?)
						</p>
					</section> -->
					<section>
						<p>
							It has been a design choice to keep schema.org <mark>generic</mark>, i.e.:
						</p>
						<ul>
							<li class="fragment">easy to <mark>extend</mark> but</li>
							<li class="fragment">hard to <mark>validate</mark></li>
						</ul>
					</section>
					<section>
						<p>
							What would a <mark>validation schema</mark> for RDF look like?
						</p>
					</section>
				</section>
				<section>
					<h4>A Schema for Validation</h4>
					<section>
						<p>
							The <a class="https://www.w3.org/TR/shacl/">Shapes Constraint Language (SHACL)</a> has been designed to <mark>declare constraints</mark> on classes and properties.
						</p>
					</section>
					<section>
						<p class="shacl">
						</p>
					</section>
					<section>
						<p>
							SHACL defines <mark>node shapes</mark>.
						</p>
						<p>
							An RDF node <mark>conforms</mark> to a shape if it satisfies all constraints defined by the shape.
						</p>
						<p>
							Constraints apply to properties defined for a node via <mark>property shapes</mark>.
						</p>
					</section>
					<section>
						<p>
							Example: https://www.datashapes.org/schemashacl.shapes.ttl
						</p>
					</section>
					<section>
						<p>
							Constraints on datatypes, on cardinalities, on classes
						</p>
					</section>
					<section>
						<p>
							SPARQL as a constraint language
						</p>
					</section>
					<section>
						<p>
							In SQL, a table schema has a syntax that is distinct from tuples. Although most DBMS have a "meta-representation" of a schema (ex: SQLite).
						</p>
						<p class="fragment">
							Conversely, <a href="https://shex.io/">Shape Expressions</a> (ShEx), an alternative to SHACL, ShEx, made the choice of a distinct, more succinct syntax.
						</p>
					</section>
					<section>
						(Opening)
						OWL satisfiability test
					</section>
				</section>
				<section>
					<h4>A Schema for Inference</h4>
					<section>
						Difference between validation and inference. [Venn diagram: what is asserted, what is true]
						Difference between a priori and a posteriori structure.
						Difference between closed-world and open-world semantics.
					</section>
					<section>
						Constraint satisfaction (schema instanciation, satisfiability): traditionally done with SHACL. If correct in a closed-world, correct in an open-world (more restrictive)

						Querying under entailment: traditionally done with OWL. Whatever is inferred is guaranteed to remain true in the future (more restrictive).
					</section>
					<section>
						RDF schema

						<p>
							The RDF Schema class and property system is similar to the type systems of object-oriented programming languages such as Java. RDF Schema differs from many such systems in that instead of defining a class in terms of the properties its instances may have, RDF Schema describes properties in terms of the classes of resource to which they apply. This is the role of the domain and range mechanisms <span class="aside"><a href="https://www.w3.org/TR/rdf-schema/#h2_ch_introduction">(W3C, 2014)</a></span>
						</p>
					</section>
					<section>
						~OWL-LD (+ property chains)
					</section>
					<section>
						Existential/universal restrictions?

						Usefule restrictions: datatype restrictions (example of Ash's birth date).
					</section>
					<section>
						Note: an RDF entity may be both an RDFS class and a NodeShape. See https://www.datashapes.org/schema.ttl

						Note: SHACL validation could be performed under OWL entailment. (research topic)
					</section>
				</section>
			</div>
		</div>

		<script src="../js/slides.js"></script>
		<script src="../js/slides-code.js"></script>
		<script>
			Reveal.initialize({
				hash: true,
				plugins: [ RevealHighlight ]
			});
		</script>
	</body>
</html>
