<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Architecture des ordinateurs</title>

		<link rel="stylesheet" href="../css/slides-reset.css">
		<link rel="stylesheet" href="../css/slides.css">
		<link rel="stylesheet" href="../css/slides-theme.css" id="theme">
		<link rel="stylesheet" href="../css/slides-code.css" id="highlight-theme">

		<style>
			.reveal .slides section section {
				margin-top: 1.5em; /* margin for upper section title */
			}

			.reveal .slides .note {
				padding: 0.5em;
				font-size: 0.5em;
				color: peru;
				background-color: wheat;
			}

			.reveal .slides .note .highlight {
				color: brown;
			}

			.reveal .slides mark {
				background-color: moccasin;
			}
			
			.reveal .slides table {
				font-size: 0.5em;
			}

			.reveal .slides figcaption {
				color: gray;
				font-size: 0.5em;
			}

			.reveal .slides img {
				max-height: 10em;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>Architecture des ordinateurs</h1>
					<p><a href="https://www.vcharpenay.link/">Victor Charpenay</a></p>
				</section>
				<section>
					<h4>Introduction</h4>
					<section>
						<p>
							Qu'est-ce qu'un ordinateur ?
						</p>
						<!-- https://commons.wikimedia.org/wiki/Personal_computer -->
					</section>
					<section>
						<img src="https://upload.wikimedia.org/wikipedia/commons/1/10/IPhone_1_and_iPhone_OS_1.jpg">
					</section>
					<section>
						<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Amazon_Kindle_Paperwhite_3.jpg/500px-Amazon_Kindle_Paperwhite_3.jpg">
					</section>
					<section>
						<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Amazon_Echo_2nd_gen.jpg/500px-Amazon_Echo_2nd_gen.jpg">
					</section>
					<section>
						<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/51/Texas_Instruments_SR-10_Calculator.jpg/960px-Texas_Instruments_SR-10_Calculator.jpg">
					</section>
					<section>
						<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Arduino_MEGA2560.png/640px-Arduino_MEGA2560.png">
					</section>
					<section>
						<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/JaCarta_smart_card.JPG/960px-JaCarta_smart_card.JPG">
					</section>
					<section>
						<p>
							Un ordinateur est un <mark>calculateur</mark> avec des périphériques d'<mark>entrée</mark> et de <mark
							>sortie</mark>.
						</p>
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/architecture-1.png">
					</section>
					<section>
						<p>
							Les signaux d'entrée/sortie peuvent prendre n'importe quelle forme :
						</p>
						<ul>
							<li class="fragment">symbole (de clavier)</li>
							<li class="fragment">pression de surface (d'écran)</li>
							<li class="fragment">mesure numérique (de capteur)</li>
							<li class="fragment">son</li>
							<li class="fragment">lumière</li>
							<li class="fragment">&hellip;</li>
						</ul>
					</section>
					<section>
						<p>
							Mais tous les calculateurs ne sont pas des ordinateurs.
						</p>
					</section>
					<section>
						<p>
							Un ordinateur est un calculateur <mark>universel</mark>.
						</p>
						<p class="fragment">
							Il peut calculer n'importe quelle fonction (qui associe une entrée à une sortie).
						</p>
						<p class="note fragment">
							D'où la variété de signaux d'entrée et sortie des appareils.
						</p>
					</section>
				</section>
				<section>
					<h4>Historique</h4>
					<section>
						<p>
							Que faut-il à un calculateur pour être universel ?
						</p>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/Pascaline-CnAM_823-1-IMG_1506-black.jpg/960px-Pascaline-CnAM_823-1-IMG_1506-black.jpg">
							<figcaption>
								<a href="https://fr.wikipedia.org/wiki/Pascaline">Pascaline</a> (1652)
							</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Jacquard_loom_p1040320.jpg/960px-Jacquard_loom_p1040320.jpg">
							<figcaption>
								<a href="https://fr.wikipedia.org/wiki/M%C3%A9tier_Jacquard">Métier Jacquard</a> (1801)
							</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Charles_Babbage_Difference_Engine_No._2_Computer_History_Museum_in_Mountian_View_California.jpg/960px-Charles_Babbage_Difference_Engine_No._2_Computer_History_Museum_in_Mountian_View_California.jpg">
							<figcaption>
								<a href="https://fr.wikipedia.org/wiki/Charles_Babbage#La_machine_%C3%A0_diff%C3%A9rences">Machine à différences</a> (1821)
							</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Z3_Deutsches_Museum.JPG/960px-Z3_Deutsches_Museum.JPG">
							<figcaption>
								<a href="https://fr.wikipedia.org/wiki/Zuse_3">Zuse 3</a> (1941)
							</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/ARL_ENIAC_01.png/960px-ARL_ENIAC_01.png">
							<figcaption>
								<a href="https://fr.wikipedia.org/wiki/ENIAC">ENIAC</a> (1945)
							</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/DEC_PDP-8-e_Minicomputer_in_Museum_%28edited%2C_without_background%29.jpg/500px-DEC_PDP-8-e_Minicomputer_in_Museum_%28edited%2C_without_background%29.jpg">
							<figcaption>
								<a href="https://fr.wikipedia.org/wiki/PDP-8">PDP-8</a> (1965)
							</figcaption>
						</figure>
					</section>
					<section>
						<p>
							Un calculateur universel doit nécessairement être <mark>programmable</mark>.
						</p>
						<p class="fragment">
							Pour autant, le métier Jacquard est programmable, mais il n'est pas un calculateur universel.
						</p>
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/architecture-2.png">
					</section>
				</section>
				<section>
					<h4>Systèmes de transition</h4>
					<section>
						<p>
							Qu'est-ce qu'un programme ?
						</p>
					</section>
					<section>
						<p>
							Un programme est une <mark>séquence d'instructions</mark>.
						</p>
						<p class="fragment">
							Chaque instruction est une <mark>transition</mark>
							d'un <mark>état</mark> à un autre.
						</p>
					</section>
					<section>
						<p>
							Le modèle de calcul formel le plus simple est celui des <mark>machines à états finis</mark>.
						</p>
						<p class="fragment">
							On les apelle aussi des <mark>automates</mark>.
						</p>
					</section>
					<section>
						<img src="https://upload.wikimedia.org/wikipedia/commons/6/6f/Braid_StepBystep.jpg">
					</section>
					<section>
						<img src="https://www.parc-naturel-pilat.fr/wp-content/webp-express/webp-images/doc-root/wp-content/uploads/2024/09/atelier-1911-1024x709.jpg.webp">
						<!-- https://www.parc-naturel-pilat.fr/nos-actions/patrimoines/nos-actions-patrimoine/captation-du-savoir-faire-passementier/ -->
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/tresse-fsm.png">
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/tresse.png">
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/architecture-3.png">
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/tresse-2a-fsm.png">
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/tresse-2a.png">
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/tresse-2b-fsm.png">
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/tresse-2b.png">
					</section>
					<section>
						<p>
							Un automate, par défaut, ne nécessite que l'<mark>état courant</mark> pour connaître les transitions possibles.
						</p>
						<p class="fragment">
							On peut lui rajouter une mémoire sous la forme d'une <mark>pile</mark>.
						</p>
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/tresse-2b-pda.png">
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/tresse-2b.png">
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/architecture-4.png">
					</section>
					<section>
						<p>
							Un automate à pile n'est pas un calculateur universel.
						</p>
						<p class="fragment">
							Il suffit cependant de remplacer la pile par un <mark>ruban</mark>.
						</p>
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/tresse-2inf-tm.png">
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/tresse-2inf.png">
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/architecture-5.png">
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/bb-5-tm.png">
					</section>
					<section>
						<img src="https://upload.wikimedia.org/wikipedia/commons/1/18/Busy_Beaver_5_State_2_Color.png">
					</section>
					<section>
						<p>
							Le critère principal pour qu'un calculateur soit universel est d'associer une <mark>mémoire</mark> à un système de transition.
						</p>
					</section>
					<section>
						<p>
							En pratique, les ordinateurs n'ont pas de mémoire sous la forme d'un ruban mais d'un <mark>index</mark>.
						</p>
						<p class="fragment">
							Ce sont des <mark>mémoires à accès direct</mark> (random access memory).
						</p>
					</section>
					<section>
						<p>
							Un autre critère d'universalité est la possibilité pour un programme d'avoir :
						</p>
						<ul>
							<li class="fragment">des branches (if &hellip;)</li>
							<li class="fragment">des boucles (for each &hellip;)</li>
						</ul>
						<p class="note fragment">
							Le Zuse 3 n'est pas considéré comme le premier ordinateur parce qu'il n'avait pas d'équivalent à <span class="highlight">if</span>.
						</p>
					</section>
					<section>
						<p>
							L'architecture de référence pour les ordinateurs est celle de <mark>von Neumann</mark>.
						</p>
						<p class="note fragment">
							Elle a en fait été conçue par John Mauchly et John Presper Eckert, que John von Neumann a eu la chance d'encadrer.
						</p>
					</section>
					<section>
						<img src="https://serpaggi-cours.pages.emse.fr/acp/html/_images/architecture-6.png">
					</section>
				</section>
				<section>
					<h4>Le calcul en pratique</h4>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/5/53/004_2021_09_17_Lichtzeltfotografie.jpg">
							<figcaption>
								Relais téléphonique
							</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://www.irif.fr/~carton/Enseignement/Architecture/Cours/Gates/tunnel.png">
							<figcaption>
								Transistor MOSFET  (source: <a href="https://www.irif.fr/~carton/Enseignement/Architecture/Cours/Gates/">O. Carton</a>)
							</figcaption>
						</figure>
					</section>
					<section>
						<p>
							Avec des portes logiques, on peut à la fois encoder des <mark>opérations</mark> (comme ADD) et de la <mark>mémoire</mark>.
						</p>
					</section>
					<section>
						<figure>
							<img src="https://www.irif.fr/~carton/Enseignement/Architecture/Cours/Gates/and.png">
							<img src="">
							<figcaption>
								Porte logique AND (source: <a href="https://www.irif.fr/~carton/Enseignement/Architecture/Cours/Gates/">O. Carton</a>)
							</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Full-adder.svg">
							<figcaption>
								Circuit logique pour ADD (1 bit)
							</figcaption>
							<!-- 2+2=5 for high values of 2? -->
						</figure>
					</section>
					<section>
						<p>
							Un processeur a un ensemble pré-défini d'opérations arithmétiques et logiques, encodées dans l'<mark>ALU</mark> (pour "arithmetic and logic unit").
						</p>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/9/92/SR_Flip-flop_Diagram.svg">
							<figcaption>
								Circuit logique de bascule
							</figcaption>
						</figure>
					</section>
					<section>
						<p>
							Un <mark>registre</mark> (<i>n</i> bits) est un ensemble de <i>n</i> bascules.
						</p>
						<p class="note fragment">
							On peut voir la RAM comme un très grand ensemble de registres mis en séquence.
						</p>
					</section>
					<section>
						<p>
							L'horloge d'un processeur permet de <mark>synchroniser</mark> l'ALU avec la mémoire.
						</p>
						<p class="fragment">
							À chaque tic-tac, le processeur fait :
						</p>
						<ul>
							<li class="fragment">une opération arithmétique ou logique ou</li>
							<li class="fragment">une opération mémoire (lecture, écriture)</li>
						</ul>
					</section>
					<section>
						<p>
							Un programme consistant en une séquence d'instructions, chaque instruction doit correspondre à :
						</p>
						<ul>
							<li class="fragment">une opération arithmétique ou logique ou</li>
							<li class="fragment">une opération mémoire (lecture, écriture)</li>
						</ul>
						<p class="note fragment">
							Dans ce cours, on distingue une instruction et une opération, qui s'exécute en un seul cycle d'horloge.
						</p>
					</section>
					<section data-background="moccasin">
						<p>
							Si l'on veut représenter un programme sous forme d'automate, à quoi correspondent les états possible de l'automate ?
						</p>
						<!-- case "état courant" / "pile" ou "ruban" -->
					</section>
					<section>
						<p>
							Les opérations mémoire passent toujours par des registres propres au processeur.
						</p>
						<p>
							Ces registres sont <mark>programmables</mark>.
						</p>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/PDP-8_I_Bedienfeld_%28simuliert%29.png/1920px-PDP-8_I_Bedienfeld_%28simuliert%29.png">
							<figcaption>Panneau frontal d'un PDP-8</figcaption>
						</figure>
					</section>
					<!-- Illustration d'un circuit ~ instruction :
					https://fr.wikipedia.org/wiki/PDP-8#/media/Fichier:S111FlipChipSchematic.jpg -->
					<section data-background="moccasin">
						<p>
							Que produit le compilateur à partir de code Java ?
						</p>
						<!-- TODO présenter un programme de "tressage" ? -->
					</section>
					<!-- <section>
						- représentation du pgm en mémoire
						index of instruction, opérande 1, opérande 2
						index of instruction, opérande 1, opérande 2
						index of instruction, opérande 1, opérande 2
					</section> -->
					<section>
						<p>
							Les mots instructions du PDP-8 sont encodées sur 12 octets :
						</p>
						<ul>
							<li class="fragment"><mark>instruction</mark> sur 3 bits</li>
							<li class="fragment">I (<mark>indirection</mark>) sur 1 bit</li>
							<li class="fragment">Z (<mark>zéro relatif</mark>) sur 1 bit</li>
							<li class="fragment"><mark>adresse mémoire</mark> sur 7 bits</li>
						</ul>
						<!--
						0 		2 	3 	4 	5 						11
						Opération 	I 	Z 	Adresse (7 bits)
						-->
						<!-- I : indirection
						Z : s'il est activé, indique que l'adresse doit être complétée en utilisant les cinq bits de poids fort du compteur de programme (PC),  -->
						<!-- si IOT, découpage différent : -->
						<!-- 0 		2 	3 					8 	9 		11
						110 = IOT 	Périphérique 	Fonction E/S -->
					</section>
					<section>
						<p>
							Le PDP-8 a&hellip; <span class="fragment">8 instructions.</span>
						</p>
						<table class="fragment">
							<tr>
								<th>Instruction</th>
								<th>Encodage</th>
								<th>Description</th>
							</tr>
							<tr>
								<td>AND</td>
								<td>000</td>
								<td>-</td>
							</tr>
							<tr>
								<td>TAD</td>
								<td>001</td>
								<td>Two Complement Add</td>
							</tr>
							<tr>
								<td>ISZ</td>
								<td>010</td>
								<td>Increment and Skip if Zero</td>
							</tr>
							<tr>
								<td>DCA</td>
								<td>011</td>
								<td>Deposit and Clear Accumulator</td>
							</tr>
							<tr>
								<td>JMS</td>
								<td>100</td>
								<td>JuMp to Subroutine</td>
							</tr>
							<tr>
								<td>JMP</td>
								<td>101</td>
								<td>JuMP</td>
							</tr>
							<tr>
								<td>IOT</td>
								<td>110</td>
								<td>Input Output Transfer</td>
							</tr>
							<tr>
								<td>OPR</td>
								<td>111</td>
								<td>Operation (dont HLT)</td>
							</tr>
							<caption>Instructions du PDP-8 et leur encodage</caption>
						</table>
					</section>
					<section>
						<p>
							Certaines opérations du PDP-8 sont <mark>micro-codées</mark>.
						</p>
					</section>
					<section data-auto-animate>
						<p>
							001000010010<br>
							001000010011<br>
							011000000000<br>
							110000001010<br>
						</p>
					</section>
					<section data-auto-animate>
						<p>
							001 0 0 0010010<br>
							001 0 0 0010011<br>
							011 0 0 0000000<br>
							110 000001 010<br>
						</p>
					</section>
					<section data-auto-animate>
						<p>
							TAD 0010010<br>
							TAD 0010011<br>
							DCA<br>
							IOT 02 010<br>
						</p>
					</section>
					<section>
						<figure>
							<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/PDP-8_I_Bedienfeld_%28simuliert%29.png/1920px-PDP-8_I_Bedienfeld_%28simuliert%29.png">
							<figcaption>Panneau frontal d'un PDP-8</figcaption>
						</figure>
					</section>
					<section>
						<p>
							Un langage assembleur est conçu pour que la compilation de code assembleur soit la plus simple possible.
						</p>
						<p class="fragment">
							C'est un langage de <mark>bas niveau</mark>.
						</p>
					</section>
					<!-- <section>
						128 193 1 / add(1, cx);
					</section> -->
					<section>
						<p>
							Pour un même jeu d'instructions, comme x86, il existe plusieurs variantes de langages assembleurs comme <a href="https://en.wikipedia.org/wiki/Netwide_Assembler">Netwide Assembler</a> ou <a href="https://en.wikipedia.org/wiki/GNU_Assembler">GNU Assembler</a>.
						</p>
						<p class="note fragment">
							Pour la suite, on utilisera le langage High-Level Assembly (HLA).
						</p>
					</section>
					<section>
						<table>
							<tr>
								<th>Instructions</th>
								<th>Description</th>
							</tr>
							<tr>
								<td>
									and, or, xor, not
								</td>
								<td>opérations logiques</td>
							</tr>
							<tr>
								<td>
									add, sub, mul, div, cmp
								</td>
								<td>opérations arithmétiques</td>
							</tr>
							<tr>
								<td>
									mov
								</td>
								<td>déplacement registre ou mémoire</td>
							</tr>
							<tr>
								<td>
									jmp
								</td>
								<td>saut d'instruction (jump)</td>
							</tr>
							<tr>
								<td>
									ja, jb, je, jae, jbe, jne
								</td>
								<td>sauts conditionnels (above/below/equal)</td>
							</tr>
							<tr>
								<td>
									halt
								</td>
								<td>arrêt du programme</td>
							</tr>
							<caption>Instructions x86 de base</caption>
						</table>
					</section>
					<section>
						<p>
							Toutes ces instructions ont des arguments qui peuvent être :
						</p>
						<ul>
							<li class="fragment">une valeur constante</li>
							<li class="fragment">le nom d'un registre</li>
							<li class="fragment">l'adresse d'une case mémoire</li>
						</ul>
<pre class="fragment"><code>add(1, ax);
mov(ax, bx);
mov(bx, my_static_var);</code></pre>
					</section>
					<section>
						<figure>
							<img src="https://www.plantation-productions.com/Webster/www.artofasm.com/Linux/HTML/images/HelloWorld5.gif">
							<figcaption>Registres x86 programmables (source: <a href="https://www.randallhyde.com/AssemblyLanguage/www.artofasm.com/index.html">AoA</a>)</figcaption>
						</figure>
					</section>
					<section>
						<figure>
							<img src="https://www.plantation-productions.com/Webster/www.artofasm.com/Linux/HTML/images/HelloWorld6.gif">
							<figcaption>Structure du registre spécial x86 EFLAGS (source: <a href="https://www.randallhyde.com/AssemblyLanguage/www.artofasm.com/index.html">AoA</a>)</figcaption>
						</figure>
					</section>
					<section>
						<p>
							En assembleur, comme dans un langage de plus haut niveau, il est important de distinguer :
						</p>
						<ul>
							<li class="fragment">une référence</li>
							<li class="fragment">une valeur (référent)</li>
						</ul>
						<p class="note fragment">
							Notamment, la différence est importante entre la valeur d'une variable <span class="highlight">x</span> et son adresse en mémoire <span class="highlight">&x</span>.
						</p>
					</section>
					<section>
						<p>
							Il existe trois modes d'adressage en assembleur :
						</p>
<pre><code>mov([5], ax);
mov([bx], ax);
mov([bx+5], ax);</code></pre>
					</section>
					<!-- <section>
						static
						someValue: int32;
						someOtherValue: int32;

						&someValue

						sections mémoire (pile, tas)
					</section> -->
				</section>
				<section>
					<h4>Autres principes architecturaux</h4>
					<section>
						<!-- re-parler des étiquettes des FSM : effets de bord -->
						<!-- re-parler du PDP-8 : instruction d'interruption / entrée-sortie -->
					</section>
				</section>
			</div>
		</div>

		<script src="../js/slides.js"></script>
		<script src="../js/slides-code.js"></script>
		<script>
			Reveal.initialize({
				hash: true,
				plugins: [ RevealHighlight ]
			});
		</script>
	</body>
</html>
